{"version":3,"sources":["App.tsx","reportWebVitals.ts","index.tsx"],"names":["includedColumns","excludedColumns","classes","root","css","topBar","content","marginRight","table","tableHeaderCell","App","inputRef","React","useRef","useState","csvFile","setCSVFile","csvData","setCSVData","courseName","setCourseName","handleCSVFile","useCallback","event","target","files","completeParse","result","console","log","data","parseCSV","papa","parse","complete","header","handleCourseName","e","value","courseNames","Set","forEach","d","Object","keys","filter","v","startsWith","map","add","columns","some","inc","every","exc","name","i","className","toString","dataRows","values","split","rows","handleCopyEmails","navigator","clipboard","writeText","join","type","ref","onChange","onClick","Array","from","sort","length","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9bd76f4e.chunk.js","sourcesContent":["import React from \"react\";\nimport papa from \"papaparse\";\nimport { css } from \"@emotion/css\";\n\ntype CSVObject = Record<string, string>;\n\nconst courseColumnName = \"課程\" as const;\nconst courseColumnNameExclude = \"課程選擇\" as const;\nconst cancelledCourseNumberColumnName = \"取消課程編號\" as const;\nconst emailColumnName = \"電子郵件地址\" as const;\nconst includedColumns = [\"時間戳記\", \"稱呼\", \"電子郵件地址\"] as const;\nconst excludedColumns = [] as const;\n\nconst classes = {\n  root: css`\n    width: 100%;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n  `,\n  topBar: css`\n    width: 100%;\n    height: 64px;\n    padding: 12px 24px;\n    box-shadow: 0px -10px 20px 0px #000;\n  `,\n  content: css`\n    width: 100%;\n    flex: 1 0 64px;\n    overflow-x: hidden;\n    overflow-y: auto;\n    padding: 12px 24px;\n  `,\n  marginRight: css`\n    margin-right: 8px;\n  `,\n  table: css`\n    width: 100%;\n  `,\n  tableHeaderCell: css`\n    border-bottom: 1px solid black;\n  `,\n};\n\nfunction App() {\n  const inputRef = React.useRef(null);\n  const [csvFile, setCSVFile] = React.useState<File>();\n  const [csvData, setCSVData] = React.useState<Array<CSVObject>>([{}]);\n  const [courseName, setCourseName] = React.useState(\"\");\n\n  const handleCSVFile = React.useCallback<\n    React.ChangeEventHandler<HTMLInputElement>\n  >((event) => {\n    setCSVFile(event.target.files?.[0]);\n  }, []);\n  const completeParse = React.useCallback(\n    (result: papa.ParseResult<CSVObject>) => {\n      console.log(result.data);\n      setCSVData(result.data);\n    },\n    []\n  );\n  const parseCSV = React.useCallback(() => {\n    if (!csvFile) return;\n    papa.parse(csvFile, {\n      complete: completeParse,\n      header: true,\n    });\n  }, [csvFile, completeParse]);\n  const handleCourseName = React.useCallback<\n    React.ChangeEventHandler<HTMLSelectElement>\n  >((e) => {\n    setCourseName(e.target.value);\n  }, []);\n\n  const courseNames = new Set<string>();\n  csvData.forEach((d) => {\n    Object.keys(d)\n      .filter(\n        (v) => v !== courseColumnNameExclude && v.startsWith(courseColumnName)\n      )\n      .map((v) => courseNames.add(d[v]));\n  });\n  const columns = Object.keys(csvData[0]).filter(\n    (v) =>\n      includedColumns.some((inc) => v.startsWith(inc)) &&\n      excludedColumns.every((exc) => !v.startsWith(exc))\n  );\n  const header = (\n    <tr>\n      {columns.map((name, i) => (\n        <td className={classes.tableHeaderCell} key={i.toString()}>\n          {name}\n        </td>\n      ))}\n    </tr>\n  );\n  const dataRows = csvData\n    .filter((d) => Object.values(d).some((v) => v === courseName))\n    .filter((d) => {\n      const cancelledCourses = d[cancelledCourseNumberColumnName]\n        .split(\",\")\n        .filter((v) => v !== \"\");\n      return cancelledCourses.every((name) => d[name] !== courseName);\n    });\n  const rows = dataRows.map((d, i) => (\n    <tr key={i.toString()}>\n      {columns.map((name) => (\n        <td>{d[name]}</td>\n      ))}\n    </tr>\n  ));\n  const handleCopyEmails = React.useCallback<\n    React.MouseEventHandler<HTMLButtonElement>\n  >(\n    (e) => {\n      navigator.clipboard.writeText(\n        dataRows.map((d) => d[emailColumnName]).join()\n      );\n    },\n    [dataRows]\n  );\n  return (\n    <div className={classes.root}>\n      <div className={classes.topBar}>\n        <input\n          className={classes.marginRight}\n          type=\"file\"\n          ref={inputRef}\n          name=\"file\"\n          onChange={handleCSVFile}\n        />\n        <button className={classes.marginRight} onClick={parseCSV}>\n          Parse\n        </button>\n        <select className={classes.marginRight} onChange={handleCourseName}>\n          {Array.from(courseNames)\n            .sort()\n            .map((name) => (\n              <option>{name}</option>\n            ))}\n        </select>\n        <span className={classes.marginRight}>{rows.length}人</span>\n        <button onClick={handleCopyEmails}>Copy Emails</button>\n      </div>\n      <div className={classes.content}>\n        <table className={classes.table}>\n          <thead>{header}</thead>\n          <tbody>{rows}</tbody>\n        </table>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}